!function(){function e(){var e,n=_.extend({},Object.getPrototypeOf(this),this.constructor.__super__);for(var r in n)n.hasOwnProperty(r)&&(e=n[r],e instanceof t.Computed&&o(this,e,r))}var t;t="undefined"!=typeof exports?require("backbone"):window.Backbone,t.Computed=function(e){return this instanceof t.Computed?(e=Array.prototype.slice.call(e,0),this.computedFunction=e[e.length-1],this.dep=e.slice(0,-1),void 0):new t.Computed(arguments)},t.Computed.prototype.getDependentProperties=function(){return this.dep};var n=t.Model;t.Model=n.extend({constructor:function(){n.apply(this,arguments),e.call(this)}});var o=function(e,t,n){var o=function(){e.set(n,t.computedFunction.call(e))},r=_.memoize(function(){return _.filter(t.getDependentProperties(),function(e){return e.indexOf("event:")<0})}),i=_.memoize(function(){return _.chain(t.getDependentProperties()).filter(function(e){return 0===e.indexOf("event:")}).map(function(e){return e.replace("event:","")}).value()}),u=function(){return r().map(function(e){return"change:"+e})},c=function(){if(r().length){var t=u().join(" ");e.on(t,o)}},p=function(){if(i().length){var t=i().join(" ");e.on(t,o)}};c(),p(),o()};"undefined"!=typeof exports&&(module.exports=t.Computed)}();