!function(n){function e(){var e,t=Object.getPrototypeOf(this);for(var i in t)t.hasOwnProperty(i)&&(e=t[i],e instanceof n.Computed&&o(this,e,i))}n.Computed=function(e){return this instanceof n.Computed?(e=Array.prototype.slice.call(e,0),this.computedFunction=e[e.length-1],this.dep=e.slice(0,-1),void 0):new n.Computed(arguments)},n.Computed.prototype.getDependentProperties=function(){return this.dep};var t=n.Model;n.Model=t.extend({constructor:function(){t.apply(this,arguments),e.call(this)}});var o=function(n,e,t){var o=function(){n.set(t,e.computedFunction.call(n))},i=_.memoize(function(){return _.filter(e.getDependentProperties(),function(n){return n.indexOf("event:")<0})}),r=_.memoize(function(){return _.chain(e.getDependentProperties()).filter(function(n){return 0===n.indexOf("event:")}).map(function(n){return n.replace("event:","")}).value()}),u=function(){return i().map(function(n){return"change:"+n})},c=function(){if(i().length){var e=u().join(" ");n.on(e,o)}},f=function(){if(r().length){var e=r().join(" ");n.on(e,o)}};c(),f(),o()}}(Backbone);